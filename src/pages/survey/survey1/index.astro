---
import './_index.scss';

import Container from '@layouts/Container/index.astro';

import FieldWithDropdown from '@components/common/FieldWithDropdown/index.astro';
import Star from '@components/common/Star/index.astro';
import Button from '@components/common/Button/index.astro';

import Breadcrumbs from '@components/pages/media/common/Breadcrumbs/index.astro';
import ProgressBar from '@components/pages/applications/common/ProgressBar/index.astro';
import CardField from '@components/pages/applications/common/CardField/index.astro';
import Textarea from '@components/pages/applications/common/Textarea/index.astro';
import DateInput from '@components/pages/applications/common/DateInput/index.astro';
import RangeSteps from '@components/pages/survey/survey1/RangeSteps/index.astro';
import CheckboxBlock from '@components/pages/survey/survey1/CheckboxBlock/index.astro';
import CardsWithImg from '@components/pages/survey/survey1/CardsWithImg/index.astro';

const breadcrumbs = [
  {
    label: 'Ещё',
    href: '#',
  },
  {
    label: 'Опросы',
    href: '#',
  },
  {
    label: 'Маркетинговая поддержка 2024',
  },
];
---

<body>
  <Container isWhiteBgSearch>
    <main>
      <div class="main-page">
        <section class="media-applications-training">
          <div class="row justify-content-center">
            <div class="col-md-7">
              <div class="media-applications-training__breadcrumbs-and-star">
                <Breadcrumbs breadcrumbs={breadcrumbs} />
                <Star />
              </div>

              <div class="media-applications-training__content">
                <div class="media-applications-training__content__title">
                  Маркетинговая поддержка 2024
                </div>
                <div class="media-applications-training__content__description">
                  Цель опроса заключалась в том, чтобы определить наиболее
                  важные критерии выбора продукции для потребителей, а также
                  выявить их предпочтения относительно дизайна, упаковки, цены и
                  других характеристик товаров.
                </div>

                <div class="media-applications-training__content__progress">
                  <ProgressBar current={7} total={14} />
                </div>

                <form class="media-applications-training__content__form">
                  <div
                    class="media-applications-training__content__form__fields"
                  >
                    <CardField isRequired={true}>
                      <label slot="title"
                        >Каких маркетенговых материалов вам не хватает</label
                      >
                      <span slot="content">
                        <Textarea />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title">Как вам сейчас материалы?</label>
                      <span slot="content">
                        <FieldWithDropdown
                          placeholder="Материал"
                          list={['Материал 1', 'Материал 2']}
                        />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title">В какое время и дату?</label>
                      <span slot="content">
                        <div style="display: flex; gap: 12px">
                          <DateInput placeholder="02.10.2023" />
                          <DateInput
                            placeholder="18:00"
                            datePickerId="timepicker"
                            isTimepicker
                          />
                        </div>
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title"
                        >Какими материалами вы пользуетесь?</label
                      >
                      <span slot="content">
                        <RangeSteps />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title"
                        >Какими материалами вы пользуетесь?</label
                      >
                      <span slot="content">
                        <CheckboxBlock />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title"
                        >Какими материалами вы пользуетесь?</label
                      >
                      <span slot="content">
                        <CheckboxBlock isRadio />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title">К какой дате и времени надо?</label>
                      <span slot="content">
                        <CardsWithImg />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title">К какой дате и времени надо?</label>
                      <span slot="content">
                        <CardsWithImg isRadio />
                      </span>
                    </CardField>

                    <CardField>
                      <label slot="title">Примечание</label>
                      <span slot="content">
                        <Textarea />
                      </span>
                    </CardField>

                    <div
                      class="media-applications-training__content__form__submit"
                    >
                      <Button
                        text="Создать заявку"
                        option="btn-primary"
                        type="submit"
                      />
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </section>
      </div>

      <script>
        // Импортируем библиотеку выбора даты/времени и её стили
        import AirDatepicker from 'air-datepicker';
        import 'air-datepicker/air-datepicker.css';

        // После загрузки DOM инициализируем два пикера
        document.addEventListener('DOMContentLoaded', () => {
          // Создаем пикер для выбора даты с настройками по умолчанию
          new AirDatepicker('#datepicker', {});

          // Создаем пикер только для выбора времени
          new AirDatepicker('#timepicker', {
            onlyTimepicker: true,
            timepicker: true,
            timeFormat: 'HH:mm',
          });
        });
      </script>
    </main>
  </Container>
</body>
