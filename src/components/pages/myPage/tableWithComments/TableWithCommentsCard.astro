---
import { Image } from 'astro:assets';

const { id, withAvatars = false } = Astro.props;

import avatar from '@assets/pages/myPage/table-with-comments-avatar.png';

import DropdownCommentCard from '@components/pages/myPage/tableWithComments/DropdownCommentCard.astro';
---

<tr>
  <td>{id}</td>
  <td class="col-md-3"
    >Провести аудит кадровой документации, утвержденной на текущий момент
  </td>
  <td class="col-md-3"
    >Аудит проведен, составлен перечень отсутсвующих документов
  </td>
  <td class="col-md-2">{'04.04.2022\n04.04.2022'}</td>
  <td>
    <div class="dropdown position-static">
      {
        withAvatars ? (
          <div
            class="avatars"
            data-bs-toggle="dropdown"
            data-bs-auto-close="outside"
            aria-expanded="false"
          >
            <div class="avatars__item">
              <Image src={avatar} width="32" height="32" alt="Аватар" />
            </div>

            <div class="avatars__item">
              <Image src={avatar} width="32" height="32" alt="Аватар" />
            </div>
          </div>
        ) : (
          <div
            data-bs-toggle="dropdown"
            data-bs-auto-close="outside"
            aria-expanded="false"
          >
            <span>Ввести</span>
          </div>
        )
      }
      <div class="dropdown-menu dropdown-comments-block">
        <div class="dropdown-comments-block__comment-cards">
          <DropdownCommentCard />
          <DropdownCommentCard />

          <div class="dropdown-comments-block__avatar-and-input">
            <div class="dropdown-comments-block__input-avatar">
              <Image src={avatar} width="32" height="32" alt="Аватар" />
            </div>

            <div class="dropdown-comments-block__input-wrapper">
              <input
                type="text"
                class="dropdown-comments-block__input"
                placeholder="Example"
              />
              <button class="dropdown-comments-block__submit-btn">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M8.00002 15C8.13263 15 8.25981 14.9473 8.35357 14.8536C8.44734 14.7598 8.50002 14.6326 8.50002 14.5V2.707L11.646 5.854C11.7399 5.94789 11.8672 6.00063 12 6.00063C12.1328 6.00063 12.2601 5.94789 12.354 5.854C12.4479 5.76011 12.5007 5.63277 12.5007 5.5C12.5007 5.36722 12.4479 5.23989 12.354 5.146L8.35402 1.146C8.30758 1.09944 8.2524 1.06249 8.19165 1.03729C8.13091 1.01208 8.06579 0.999105 8.00002 0.999105C7.93425 0.999105 7.86913 1.01208 7.80839 1.03729C7.74764 1.06249 7.69247 1.09944 7.64602 1.146L3.64602 5.146C3.59953 5.19249 3.56266 5.24768 3.5375 5.30842C3.51234 5.36915 3.49939 5.43426 3.49939 5.5C3.49939 5.63277 3.55213 5.76011 3.64602 5.854C3.73991 5.94789 3.86725 6.00063 4.00002 6.00063C4.1328 6.00063 4.26013 5.94789 4.35402 5.854L7.50002 2.707V14.5C7.50002 14.6326 7.5527 14.7598 7.64647 14.8536C7.74024 14.9473 7.86741 15 8.00002 15Z"
                    fill="#212529"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </td>
  <td>-</td>
  <td>
    <div class="form-check">
      <input class="form-check-input table-checkbox" type="checkbox" />
    </div>
  </td>
</tr>

<style lang="scss">
  tr:last-child td {
    border: none;
  }

  td {
    color: #41464b;
    font-size: 14px;
    font-weight: 500;
    padding: 20px 10px;
    white-space: pre-line;
    background-color: #f3f5fb;
    vertical-align: top;
    border: none;
  }

  td span {
    color: #487cfb;
    cursor: pointer;
  }

  .avatars {
    display: flex;
    align-items: center;
    cursor: pointer;
    width: fit-content;

    &__item {
      border-radius: 50%;
      border: 3px solid #f3f5fb;

      &:not(:first-child) {
        margin-left: -15px;
      }
    }
  }

  .table-checkbox {
    cursor: pointer;
  }

  .dropdown-comments-block {
    border: none;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

    &__comment-cards {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    &__avatar-and-input {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 25px;
    }

    &__input-avatar {
      img {
        border-radius: 50%;
      }
    }

    &__input-wrapper {
      display: flex;
      height: 40px;
      border: 2px solid #f5f7fc !important;
      border-radius: 5px;
      flex: 1;
    }

    &__input {
      flex: 1;
      padding: 0 12px;
      font-size: 16px;
      color: #41464b;
      border: none;
      outline: none;
      border-radius: 16px;

      &::placeholder {
        color: #ccd3e7;
      }
    }

    &__submit-btn {
      background-color: #f5f7fc;
      width: 42px;
      border: none;
      border-left: 2px solid #f5f7fc;
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
    }
  }
</style>
